(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{LtOX:function(e,t,n){"use strict";n.r(t);var a=n("ofXK"),r=n("ebz3"),i=n("FpXt"),o=n("tyNb"),l=n("UJnh"),d=n("fXoL"),c=n("AytR"),s=n("tk/3");let m=(()=>{class e{constructor(e){this.http=e,this.endpoint=`${c.a.baseUrl}/worklog/`}getActivitiesUser(e){return this.http.get(`${`${c.a.baseUrl}/home/actividades/`}${e}`)}getBitacora(){return this.http.get(this.endpoint)}getBitacoraById(e){return this.http.get(`${this.endpoint}${e}`)}createBitacora(e){return this.http.post(this.endpoint,e)}updateBitacora(e,t){return this.http.put(`${this.endpoint}${e}/`,t)}deleteBitacora(e){return this.http.delete(`${this.endpoint}${e}`)}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275inject"](s.b))},e.\u0275prov=d["\u0275\u0275defineInjectable"]({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=n("7M+M"),u=n("B3M2"),h=n("/n7v"),v=n("V8h6"),b=n("njyG");function f(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"tr"),d["\u0275\u0275elementStart"](1,"td"),d["\u0275\u0275elementStart"](2,"a",6),d["\u0275\u0275text"](3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](4,"td"),d["\u0275\u0275text"](5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"td"),d["\u0275\u0275text"](7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"td"),d["\u0275\u0275elementStart"](9,"a",7),d["\u0275\u0275listener"]("click",(function(n){d["\u0275\u0275restoreView"](e);const a=t.$implicit;return d["\u0275\u0275nextContext"](2).goToLink(a.file)})),d["\u0275\u0275text"](10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](11,"td"),d["\u0275\u0275elementStart"](12,"button",8),d["\u0275\u0275element"](13,"i",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"button",10),d["\u0275\u0275listener"]("click",(function(n){d["\u0275\u0275restoreView"](e);const a=t.$implicit;return d["\u0275\u0275nextContext"](2).deleteBitacora(a.id)})),d["\u0275\u0275element"](15,"i",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;d["\u0275\u0275advance"](2),d["\u0275\u0275propertyInterpolate1"]("routerLink","detail/",e.id,""),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",e.emailFile," "),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.description),d["\u0275\u0275advance"](3),d["\u0275\u0275textInterpolate"](e.file),d["\u0275\u0275advance"](2),d["\u0275\u0275propertyInterpolate1"]("routerLink","edit/",e.id,"")}}function g(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"table",4),d["\u0275\u0275elementStart"](2,"thead"),d["\u0275\u0275elementStart"](3,"tr"),d["\u0275\u0275elementStart"](4,"th"),d["\u0275\u0275text"](5,"Email"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"th"),d["\u0275\u0275text"](7,"Nombre Labor"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"th"),d["\u0275\u0275text"](9,"Descripci\xf3n"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"th"),d["\u0275\u0275text"](11,"Adjunto"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"th"),d["\u0275\u0275text"](13,"Opciones"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"tbody"),d["\u0275\u0275template"](15,f,16,6,"tr",5),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("dtOptions",e.dtOptions),d["\u0275\u0275advance"](14),d["\u0275\u0275property"]("ngForOf",e.bitacoras)}}let S=(()=>{class e{constructor(e,t,n){this.bitacoraService=e,this.alertService=t,this.confirmationDialogService=n,this.bitacoras=[],this.dtOptions={},this.loading=!1}ngOnInit(){this.dataTableOptions(),this.getBitacoras()}getBitacoras(){this.bitacoraService.getBitacora().subscribe(e=>{this.bitacoras=e,this.loading=!0},e=>{console.log(e)})}deleteBitacora(e){this.confirmationDialogService.confirmThis("\xbfEsta seguro que desea eliminar este registro ?",()=>{this.onDelete(e)},()=>{})}onDelete(e){this.bitacoraService.deleteBitacora(e).subscribe(()=>{this.bitacoras=this.bitacoras.filter(t=>t.id!=parseInt(e)),this.alertService.success("El registro ha sido eliminado de la bit\xe1cora",{keepAfterRouteChange:!0})})}dataTableOptions(){this.dtOptions={pageLength:10,language:l.a}}goToLink(e){window.open(e,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](m),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-bitacora-list"]],decls:5,vars:2,consts:[[1,"col-md-12"],["cardTitle","Bit\xe1cora de Campo","cardClass","table-card",3,"options"],[1,"table-responsive","table-padding"],[4,"ngIf"],["datatable","",1,"table","table-hover",3,"dtOptions"],[4,"ngFor","ngForOf"],[3,"routerLink"],[3,"click"],["type","button",1,"btn","btn-icon","btn-info",3,"routerLink"],[1,"feather","icon-edit-2"],["type","button",1,"btn","btn-icon","btn-danger","left-margin",3,"click"],[1,"feather","icon-trash-2"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"app-card",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275template"](3,g,16,2,"div",3),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](4,"app-confirmation-dialog")),2&e&&(d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("options",!1),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf",t.loading))},directives:[h.a,a.NgIf,v.a,b.a,a.NgForOf,o.i,o.g],styles:[""]}),e})(),E=(()=>{class e{constructor(e,t){this.bitacoraService=e,this.route=t}ngOnInit(){this.id=this.route.snapshot.params.id,this.getBitacora()}getBitacora(){this.bitacoraService.getBitacoraById(this.id).subscribe(e=>{this.bitacora=e})}goToLink(e){window.open(e,"_blank")}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](m),d["\u0275\u0275directiveInject"](o.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-bitacora-details"]],decls:27,vars:5,consts:[["cardTitle","Detalle Bitacora",3,"options"],[1,"row"],[1,"form-group","col-md-6"],["for",""],[3,"click"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"app-card",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"div",2),d["\u0275\u0275elementStart"](3,"label",3),d["\u0275\u0275elementStart"](4,"strong"),d["\u0275\u0275text"](5,"Email"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](6,"p"),d["\u0275\u0275text"](7),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](8,"div",2),d["\u0275\u0275elementStart"](9,"label",3),d["\u0275\u0275elementStart"](10,"strong"),d["\u0275\u0275text"](11,"Nombre Labor"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"p"),d["\u0275\u0275text"](13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](14,"div",2),d["\u0275\u0275elementStart"](15,"label",3),d["\u0275\u0275elementStart"](16,"strong"),d["\u0275\u0275text"](17,"Descripci\xf3n"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](18,"p"),d["\u0275\u0275text"](19),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",2),d["\u0275\u0275elementStart"](21,"label",3),d["\u0275\u0275elementStart"](22,"strong"),d["\u0275\u0275text"](23,"Adjunto"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"p"),d["\u0275\u0275elementStart"](25,"a",4),d["\u0275\u0275listener"]("click",(function(e){return t.goToLink(null==t.bitacora?null:t.bitacora.file)})),d["\u0275\u0275text"](26),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275property"]("options",!1),d["\u0275\u0275advance"](7),d["\u0275\u0275textInterpolate"](null==t.bitacora?null:t.bitacora.emailFile),d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](null==t.bitacora?null:t.bitacora.name),d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](null==t.bitacora?null:t.bitacora.description),d["\u0275\u0275advance"](7),d["\u0275\u0275textInterpolate"](null==t.bitacora?null:t.bitacora.file))},directives:[h.a],styles:[""]}),e})();var x=n("3Pt+");function I(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",16),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",e.getErrorMessage("date")," ")}}function y(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"option",17),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;d["\u0275\u0275property"]("value",e[0]),d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate"](e[1])}}function F(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div",16),d["\u0275\u0275text"](1),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](1),d["\u0275\u0275textInterpolate1"](" ",e.getErrorMessage("actividad")," ")}}const C=function(e){return{"invalid-input":e}};let k=(()=>{class e{constructor(e,t,n,a,r,i){this.formBuilder=e,this.route=t,this.router=n,this.alertService=a,this.location=r,this.bitacoraService=i,this.loading=!1,this.actividades=[]}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id,this.formInit(),this.title=this.isAddMode?"Nuevo Registro de Bitacora":"Editar Registro de Bitacora",this.getActivitiesUser()}formInit(){this.bitacoraForm=this.formBuilder.group({date:["",x.D.required],description:[""],file:[""],actividad:[""],name_operator:[{value:"",disabled:!0}],codigo_zona:[{value:"",disabled:!0}],nombre_labor:[{value:"",disabled:!0}]})}get f(){return this.bitacoraForm.controls}onSubmit(){this.loading=!0}cancel(){this.location.back()}getErrorMessage(e){let t="";return this.bitacoraForm.get(e).errors.required&&(t="El Campo es requerido."),t}isValidField(e){let t=this.bitacoraForm.get(e).touched,n=this.bitacoraForm.get(e).dirty,a=!this.bitacoraForm.get(e).valid;return(t||n)&&a}getActivitiesUser(){this.bitacoraService.getActivitiesUser("1").subscribe(e=>{console.log("data",e),e.actividades.forEach(e=>{this.actividades.push([e.id,e.schedule_date,e.name_operator,e.codigo_zona,e.nombre_labor])})})}selectDataUser(e){let t=this.actividades.filter(t=>t[0]==e);this.bitacoraForm.get("name_operator").setValue(t[0][2]),this.bitacoraForm.get("codigo_zona").setValue(t[0][3]),this.bitacoraForm.get("nombre_labor").setValue(t[0][4])}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](x.f),d["\u0275\u0275directiveInject"](o.a),d["\u0275\u0275directiveInject"](o.f),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](a.Location),d["\u0275\u0275directiveInject"](m))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["app-bitacora-add-edit"]],decls:43,vars:12,consts:[[1,"row"],[1,"col-sm-12"],[3,"cardTitle","options"],[3,"formGroup","ngSubmit"],[1,"form-group","col-md-6"],["type","date","formControlName","date","placeholder","Fecha",1,"form-control",3,"ngClass"],["class","invalid-input-feedback",4,"ngIf"],["for",""],["formControlName","actividad",1,"form-control",3,"ngClass","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","name_operator","placeholder","Operador",1,"form-control"],["type","text","formControlName","codigo_zona","placeholder","Zona",1,"form-control"],["type","text","formControlName","nombre_labor","placeholder","Labor",1,"form-control"],[1,"form-group","col-md-12"],["type","file","formControlName","file","placeholder","Evidencia",1,"form-control"],["type","file","accept","image/*","capture","camera","id","camera"],[1,"invalid-input-feedback"],[3,"value"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"div",0),d["\u0275\u0275elementStart"](1,"div",1),d["\u0275\u0275elementStart"](2,"app-card",2),d["\u0275\u0275elementStart"](3,"form",3),d["\u0275\u0275listener"]("ngSubmit",(function(e){return t.onSubmit()})),d["\u0275\u0275elementStart"](4,"div",0),d["\u0275\u0275elementStart"](5,"div",4),d["\u0275\u0275elementStart"](6,"label"),d["\u0275\u0275text"](7,"Fecha"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](8,"input",5),d["\u0275\u0275template"](9,I,2,1,"div",6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"div",4),d["\u0275\u0275elementStart"](11,"label",7),d["\u0275\u0275text"](12,"Actividad"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](13,"select",8),d["\u0275\u0275listener"]("ngModelChange",(function(e){return t.selectDataUser(e)})),d["\u0275\u0275template"](14,y,2,2,"option",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](15,F,2,1,"div",6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](16,"div",4),d["\u0275\u0275elementStart"](17,"label",7),d["\u0275\u0275text"](18,"Operador"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](19,"input",10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"div",4),d["\u0275\u0275elementStart"](21,"label",7),d["\u0275\u0275text"](22,"Zona"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](23,"input",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](24,"div",4),d["\u0275\u0275elementStart"](25,"label",7),d["\u0275\u0275text"](26,"Labor"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](27,"input",12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"div",13),d["\u0275\u0275elementStart"](29,"label",7),d["\u0275\u0275text"](30,"Evidencias"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](31,"div",4),d["\u0275\u0275elementStart"](32,"label",7),d["\u0275\u0275text"](33,"Imagen"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](34,"input",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](35,"div",4),d["\u0275\u0275elementStart"](36,"label",7),d["\u0275\u0275text"](37,"Audio"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](38,"input",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"div",4),d["\u0275\u0275elementStart"](40,"label",7),d["\u0275\u0275text"](41,"Capturar foto"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](42,"input",15),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e&&(d["\u0275\u0275advance"](2),d["\u0275\u0275propertyInterpolate"]("cardTitle",t.title),d["\u0275\u0275property"]("options",!1),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("formGroup",t.bitacoraForm),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](8,C,t.isValidField("date"))),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isValidField("date")),d["\u0275\u0275advance"](4),d["\u0275\u0275property"]("ngClass",d["\u0275\u0275pureFunction1"](10,C,t.isValidField("actividad"))),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngForOf",t.actividades),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf",t.isValidField("actividad")))},directives:[h.a,x.F,x.q,x.i,x.c,x.p,x.h,a.NgClass,a.NgIf,x.B,a.NgForOf,x.u,x.E],styles:[""]}),e})();const B=[{path:"",component:S},{path:"new",component:k},{path:"edit/:id",component:k},{path:"detail/:id",component:E}];let w=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[o.j.forChild(B)],o.j]}),e})();n.d(t,"BitacoraModule",(function(){return j}));let j=(()=>{class e{}return e.\u0275mod=d["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=d["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.CommonModule,w,r.a,i.a]]}),e})()}}]);